{% extends "layout.html" %}

{% block main %}
<!-- Header & tabs -->
<div class="p-6 text-center">
    <div class="text-4xl leading-none">üèîÔ∏è</div>
    <h1 class="mt-3 text-xl font-semibold">{{ trip_name }}</h1>

    <!-- Faux-tabs -->
    <form hx-get="/tab" hx-target="#card" hx-trigger="change" hx-swap="innerHTML">
        <nav class="relative select-none mt-4 flex rounded-full bg-cyan-500/100 p-1 text-sm font-medium"
             aria-label="Finance sections">

            <input type="hidden" name="bucket" value="{{ bucket }}">
            <input type="hidden" name="payer" value="{{ current_user }}">

            <!-- Expenses (default) -->
            <input type="radio" id="tab-expenses" name="tab" value="expenses"
                   class="peer absolute h-0 w-0 opacity-0" checked>
            <label for="tab-expenses"
                   class="z-10 flex-1 cursor-pointer rounded-full py-2 text-center font-semibold
                          text-white/70 transition-colors peer-checked:text-white">
                Expenses
            </label>

            <!-- Balances -->
            <input type="radio" id="tab-balances" name="tab" value="balances"
                   class="peer absolute h-0 w-0 opacity-0">
            <label for="tab-balances"
                   class="z-10 flex-1 cursor-pointer rounded-full py-2 text-center font-semibold
                          text-white/70 transition-colors peer-checked:text-white">
                Balances
            </label>

            <!-- sliding pill -->
            <span aria-hidden="true"
                  class="slider absolute inset-y-1 left-1 w-[calc(50%-0.25rem)]
                         rounded-full bg-white/20 backdrop-blur
                         transition-transform duration-300"></span>
        </nav>
    </form>

    <!-- Key figures -->
    <div class="mt-5 grid grid-cols-2 text-sm gap-4 text-black/70">
        <div class="text-left">
            <p>My expenses</p>
            <p class="font-semibold">{{ mine.value | round(2) }} ‚Ç¨</p>
        </div>
        <div class="text-right">
            <p>Total expenses</p>
            <p class="font-semibold">{{ total.value | round(2) }} ‚Ç¨</p>
        </div>
    </div>
</div>

<!-- Expenses or balances, based on the Faux-tabs -->
<div id="card">
    {% include "fragments/expenses.html" %}
</div>
{% endblock %}